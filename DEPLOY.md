# STARFISH-PRIME Render Deployment Guide

## Option 1: Web Interface Deployment (Recommended)

1. **Login to Render Dashboard**:
   - Go to https://dashboard.render.com
   - Login with your account

2. **Deploy from GitHub**:
   - Click "New +" â†’ "Blueprint"
   - Connect GitHub repo: `spencerandtheteagues/starfish-prime`
   - Select the `master` branch
   - Render will automatically detect the `render.yaml` file

3. **Services Created**:
   - `starfish-prime-db` (PostgreSQL Database)
   - `starfish-prime-api` (Main API)
   - `starfish-prime-web` (Frontend)
   - `starfish-prime-orchestrator` (AI Orchestrator)
   - `starfish-prime-preview` (Preview Manager)
   - `starfish-prime-ide` (Development IDE)
   - `starfish-prime-worker` (Background Worker)

## Option 2: API Deployment

Use Render's API to deploy programmatically:

```bash
# Set your Render API key
export RENDER_API_KEY="your-render-api-key"

# Deploy blueprint
curl -X POST "https://api.render.com/v1/blueprints/deploy" \
  -H "Authorization: Bearer $RENDER_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "serviceSpec": {
      "repo": "https://github.com/spencerandtheteagues/starfish-prime.git",
      "branch": "master"
    }
  }'
```

## Configuration Details

### Database Configuration
- **Name**: starfish-prime-db
- **Database**: starfish_prime
- **User**: starfish_user
- **Plan**: Free tier

### Service URLs (after deployment)
- **API**: https://starfish-prime-api.onrender.com
- **Web**: https://starfish-prime-web.onrender.com
- **IDE**: https://starfish-prime-ide.onrender.com
- **Orchestrator**: https://starfish-prime-orchestrator.onrender.com
- **Preview**: https://starfish-prime-preview.onrender.com
- **Worker**: https://starfish-prime-worker.onrender.com

### Environment Variables
All required environment variables are defined in the `render.yaml` file:
- JWT secrets are auto-generated
- Database URL is automatically connected
- CORS origins are pre-configured
- Service ports are set for Render

## Post-Deployment Steps

1. **Database Migrations**:
   The API service will automatically run Prisma migrations on startup.

2. **Health Checks**:
   - API: `/health`
   - Orchestrator: `/health`
   - Preview Manager: `/health`
   - Worker: `/health`

3. **Testing**:
   ```bash
   # Test API health
   curl https://starfish-prime-api.onrender.com/health

   # Test web frontend
   curl https://starfish-prime-web.onrender.com
   ```

## Troubleshooting

### Common Issues:
1. **Build failures**: Check Dockerfile paths in `render.yaml`
2. **Database connection**: Verify DATABASE_URL is properly set
3. **CORS errors**: Update CORS_ORIGINS if needed

### Logs:
- Access logs via Render dashboard for each service
- Monitor deployment progress in real-time

## Security Notes

- JWT secrets are auto-generated by Render
- Database credentials are managed by Render
- All services use HTTPS in production
- CORS is configured for cross-origin requests

## Scaling

Each service is on the free tier initially. To scale:
1. Upgrade service plans in Render dashboard
2. Add more worker instances for background processing
3. Consider Redis for session management (additional service)

---

**Repository**: https://github.com/spencerandtheteagues/starfish-prime
**Render Blueprint**: `render.yaml` in repository root